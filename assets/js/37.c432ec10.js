(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{315:function(e,t,a){"use strict";a.r(t);var r=a(10),o=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"run-with-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-with-docker"}},[e._v("#")]),e._v(" Run with Docker")]),e._v(" "),t("h2",{attrs:{id:"registries"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#registries"}},[e._v("#")]),e._v(" Registries")]),e._v(" "),t("p",[e._v("The Docker images are published on:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hub.docker.com/r/gotson/komga",target:"_blank",rel:"noopener noreferrer"}},[e._v("DockerHub"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/gotson/komga/pkgs/container/komga",target:"_blank",rel:"noopener noreferrer"}},[e._v("ghcr.io"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"version-tags"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#version-tags"}},[e._v("#")]),e._v(" Version tags")]),e._v(" "),t("p",[e._v("This image provides various versions that are available via tags.")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[t("strong",[e._v("Tag")])]),e._v(" "),t("th",[t("strong",[e._v("Description")])])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("latest")])]),e._v(" "),t("td",[e._v("latest commit")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("MAJOR.x")])]),e._v(" "),t("td",[e._v("latest "),t("code",[e._v("MAJOR")]),e._v(" version, for example "),t("code",[e._v("0.x")])])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("x.y.z")])]),e._v(" "),t("td",[e._v("version "),t("code",[e._v("x.y.z")])])])])]),e._v(" "),t("h2",{attrs:{id:"usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),t("p",[e._v("Here are some example snippets to help you get started creating a container.")]),e._v(" "),t("h3",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" docker")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker create \\\n  --name=komga \\\n  --user 1000:1000 \\\n  -p 25600:25600 \\\n  --mount type=bind,source=/path/to/config,target=/config \\\n  --mount type=bind,source=/path/to/data,target=/data \\\n  --restart unless-stopped \\\n  gotson/komga\n")])])]),t("p",[e._v("Then start the container:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker start komga\n")])])]),t("h3",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" docker-compose")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("---\nversion: '3.3'\nservices:\n  komga:\n    image: gotson/komga\n    container_name: komga\n    volumes:\n      - type: bind\n        source: /path/to/config\n        target: /config\n      - type: bind\n        source: /path/to/data\n        target: /data\n      - type: bind\n        source: /etc/timezone #alternatively you can use a TZ environment variable, like TZ=Europe/London\n        target: /etc/timezone\n        read_only: true\n    ports:\n      - 25600:25600\n    user: \"1000:1000\"\n    # remove the whole environment section if you don't need it\n    environment:\n      - <ENV_VAR>=<extra configuration>\n    restart: unless-stopped\n")])])]),t("h2",{attrs:{id:"parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[e._v("#")]),e._v(" Parameters")]),e._v(" "),t("p",[e._v("Container images are configured using parameters passed at runtime (such as those above).\nThese parameters are separated by a colon and indicate "),t("code",[e._v("external:internal")]),e._v(" respectively.\nFor example, "),t("code",[e._v("-p 8080:80")]),e._v(" would expose port "),t("code",[e._v("80")]),e._v(" from inside the container to be accessible from the host's IP on port "),t("code",[e._v("8080")]),e._v(" outside the container.")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[e._v("Parameter")]),e._v(" "),t("th",[e._v("Function")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("-p 25600")])]),e._v(" "),t("td",[e._v("The port for the Komga APIs and web interface")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("--user: 1000:1000")])]),e._v(" "),t("td",[e._v("User:Group identifier - see below for explanation")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("--mount type=bind,source=/path/to/config,target=/config")])]),e._v(" "),t("td",[e._v("Database and Komga configurations")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("--mount type=bind,source=/path/to/data,target=/data")])]),e._v(" "),t("td",[e._v("Location of your data directory on disk. Choose a folder that contains both your books and your preferred import location for hardlinks to work.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[e._v("-e ENV_VAR=value")])]),e._v(" "),t("td",[e._v("Any "),t("RouterLink",{attrs:{to:"/installation/configuration.html"}},[e._v("configuration")]),e._v(" environment variable")],1)])])]),e._v(" "),t("h2",{attrs:{id:"user-group-identifiers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-group-identifiers"}},[e._v("#")]),e._v(" User / Group Identifiers")]),e._v(" "),t("p",[e._v("When using volumes ("),t("code",[e._v("-v")]),e._v(" flags) permissions issues can arise between the host OS and the container, we avoid this issue by allowing you to specify the user ID and group ID.")]),e._v(" "),t("p",[e._v("Ensure any volume directories on the host are owned by the same user you specify and any permissions issues will vanish like magic.")]),e._v(" "),t("p",[e._v("In this instance "),t("code",[e._v("UID=1000")]),e._v(" and "),t("code",[e._v("GID=1000")]),e._v(", to find yours use "),t("code",[e._v("id <your_user>")]),e._v(" as below:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ id <your_user>\n  uid=1000(jdoe) gid=1000(jdgroup) groups=1000(jdgroup)\n")])])]),t("h2",{attrs:{id:"increase-memory-limit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#increase-memory-limit"}},[e._v("#")]),e._v(" Increase memory limit")]),e._v(" "),t("p",[e._v("By default the "),t("code",[e._v("java")]),e._v(" process will be limited in the maximum amount of memory (RAM) it can use, usually 1gb. If you encounter some "),t("code",[e._v("OutOfMemoryException")]),e._v(" in the logs you probably need to increase the maximum memory Komga can use.")]),e._v(" "),t("p",[e._v("To do so, you can use the "),t("code",[e._v("JAVA_TOOL_OPTIONS=-Xmx<limit>")]),e._v(" environment variable, where "),t("code",[e._v("<limit>")]),e._v(" can be any amount like "),t("code",[e._v("2048m")]),e._v(", "),t("code",[e._v("4g")]),e._v(" etc. For example to run Komga with a maximum of 4gb of memory:")]),e._v(" "),t("div",{staticClass:"language-shell script extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("JAVA_TOOL_OPTIONS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("-Xmx4g\n")])])]),t("h2",{attrs:{id:"support-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#support-info"}},[e._v("#")]),e._v(" Support info")]),e._v(" "),t("ul",[t("li",[e._v("Shell access whilst the container is running: "),t("code",[e._v("docker exec -it komga /bin/bash")])]),e._v(" "),t("li",[e._v("To monitor the logs of the container in realtime: "),t("code",[e._v("docker logs -f komga")])])]),e._v(" "),t("h2",{attrs:{id:"updating"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating"}},[e._v("#")]),e._v(" Updating")]),e._v(" "),t("p",[e._v("Below are the instructions for updating containers:")]),e._v(" "),t("h3",{attrs:{id:"via-docker-run-create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#via-docker-run-create"}},[e._v("#")]),e._v(" Via Docker Run/Create")]),e._v(" "),t("ul",[t("li",[e._v("Update the image: "),t("code",[e._v("docker pull gotson/komga")])]),e._v(" "),t("li",[e._v("Stop the running container: "),t("code",[e._v("docker stop komga")])]),e._v(" "),t("li",[e._v("Delete the container: "),t("code",[e._v("docker rm komga")])]),e._v(" "),t("li",[e._v("Recreate a new container with the same docker create parameters as instructed above (if mapped correctly to a host folder, your "),t("code",[e._v("/config")]),e._v(" folder and settings will be preserved)")]),e._v(" "),t("li",[e._v("Start the new container: "),t("code",[e._v("docker start komga")])]),e._v(" "),t("li",[e._v("You can also remove the old dangling images: "),t("code",[e._v("docker image prune")])])]),e._v(" "),t("h3",{attrs:{id:"via-docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#via-docker-compose"}},[e._v("#")]),e._v(" Via Docker Compose")]),e._v(" "),t("ul",[t("li",[e._v("Update all images: "),t("code",[e._v("docker-compose pull")]),e._v(" "),t("ul",[t("li",[e._v("or update a single image: "),t("code",[e._v("docker-compose pull komga")])])])]),e._v(" "),t("li",[e._v("Let compose update all containers as necessary: "),t("code",[e._v("docker-compose up -d")]),e._v(" "),t("ul",[t("li",[e._v("or update a single container: "),t("code",[e._v("docker-compose up -d komga")])])])]),e._v(" "),t("li",[e._v("You can also remove the old dangling images: "),t("code",[e._v("docker image prune")])])]),e._v(" "),t("h3",{attrs:{id:"automatic-updates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#automatic-updates"}},[e._v("#")]),e._v(" Automatic updates")]),e._v(" "),t("p",[e._v("You can use "),t("a",{attrs:{href:"https://github.com/containrrr/watchtower",target:"_blank",rel:"noopener noreferrer"}},[e._v("Watchtower"),t("OutboundLink")],1),e._v(" to automatically update your containers.")])])}),[],!1,null,null,null);t.default=o.exports}}]);